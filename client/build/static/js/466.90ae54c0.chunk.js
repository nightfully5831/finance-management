"use strict";(self.webpackChunkfinance_dashboard=self.webpackChunkfinance_dashboard||[]).push([[466],{923:(e,t,a)=>{a.d(t,{An:()=>l,Kf:()=>i,Qw:()=>h,Vp:()=>d,au:()=>c,om:()=>n,pC:()=>s,vp:()=>o});var r=a(63204);const n=async e=>{try{let t={type:"",data:{}};return await r.Ay.post(r.vZ.revenue.getRevenueByMonth,e).then((e=>{t={type:"success",data:e.data}})).catch((e=>{t={type:"error",data:e}})),t}catch(t){throw console.error("Error fetching Revenue By Month:",t),t}},s=async e=>{try{let t={type:"",data:{}};return await r.Ay.post(r.vZ.revenue.getRevenue,e).then((e=>{t={type:"success",data:e.data.data.data}})).catch((e=>{t={type:"error",data:e}})),t}catch(t){return console.error("Error fetching Revenue:",t),[]}},c=async e=>{try{let t={type:"",data:{}};return await r.Ay.post(r.vZ.balanceSheet.getBalanceSheet,e).then((e=>{t={type:"success",data:e.data.data.data}})).catch((e=>{t={type:"error",data:e}})),t}catch(t){return console.error("Error fetching Revenue:",t),[]}},o=async e=>{try{let t={type:"",data:{}};return await r.Ay.post(r.vZ.balanceSheet.getBalanceSheetByMonth,e).then((e=>{t={type:"success",data:e.data}})).catch((e=>{t={type:"error",data:e}})),t}catch(t){throw console.error("Error fetching Balance Sheet By Month:",t),t}},l=async e=>{try{let t={type:"",data:{}};return await r.Ay.post(r.vZ.coa.getCOA,e).then((e=>{t={type:"success",data:e.data.data.data}})).catch((e=>{t={type:"error",data:e}})),t}catch(t){return console.error("Error fetching Revenue:",t),[]}},d=async e=>{try{let t={type:"",data:{}};return await r.Ay.post(r.vZ.revenue.create,e).then((e=>{t={type:"success",data:e.data.data.data}})).catch((e=>{t={type:"error",data:e}})),t}catch(t){throw console.log("Error Create Revenue",t),t}},i=async e=>{try{let t={type:"",data:{}};return await r.Ay.post(r.vZ.balanceSheet.create,e).then((e=>{t={type:"success",data:e.data.data.data}})).catch((e=>{t={type:"error",data:e}})),t}catch(t){throw console.log("Error Create Revenue",t),t}},h=async e=>{try{let t={type:"",data:{}};return await r.Ay.post(r.vZ.coa.create,e).then((e=>{t={type:"success",data:e.data.data.data}})).catch((e=>{t={type:"error",data:e}})),t}catch(t){return console.log("Error Create COA",t),[]}}},40019:(e,t,a)=>{a.d(t,{A:()=>R});var r=a(11238),n=a(65043),s=a(7353),c=a(12110),o=a(94496),l=a(67784),d=a(51787),i=a(17392),h=a(49633),p=a(79650),u=a(71806),y=a(84882),A=a(68738),g=a(39652),x=a(58093),f=a(73460),v=a(68039),m=a(79484),j=a(34535),S=a(51975),w=a(70579);const C=(0,j.Ay)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});const R=function(e){let{onSetResult:t,currentResult:a,titleArray:j}=e;const[R,b]=(0,n.useState)([]),[I,E]=(0,n.useState)(""),[O,P]=(0,n.useState)(""),[U,B]=(0,n.useState)(""),[Z,k]=(0,n.useState)("asc"),[M,_]=(0,n.useState)(0),[D,z]=(0,n.useState)(7),F=e=>{const a=e.target.files[0];if(a){const e=new FileReader;e.onload=e=>{const a=new Uint8Array(e.target.result),n=r.LF(a,{type:"array"}),s=n.SheetNames[0],c=n.Sheets[s],o=r.Wp.sheet_to_json(c,{header:1});if(o.length>0){const e=(e=>{const t=[];return e.filter((e=>0!==e.length)).map((e=>{const a=[...e];return"string"!==typeof e[0]&&(a[0]=a[0].toString()),"Roll UP"!==j[2]&&(e[1]&&e[3]?("string"!==typeof e[1]&&(a[1]=a[1].toString()),"string"!==typeof e[3]&&(a[3]=a[3].toString())):(a[1]="",a[3]="")),t.push(a),!0})),t})(o.slice(1));t(e)}},e.readAsArrayBuffer(a)}},N=[...R].sort(((e,t)=>{if(!U)return 0;const a=j.indexOf(U);return e[a]<t[a]?"asc"===Z?-1:1:e[a]>t[a]?"asc"===Z?1:-1:0})).filter((e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.toString().includes(I)})),W=N.slice(M*D,M*D+D);return(0,n.useEffect)((()=>{b(a)}),[a]),(0,w.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",position:"relative",width:"100%",justifyContent:"top",alignItems:"center"},children:(0,w.jsxs)(c.A,{sx:{width:"100%",p:2},children:[(0,w.jsxs)(o.A,{sx:{fontWeight:"500",fontSize:"18px"},children:["Roll UP"===j[2]?"Chart of Account":"Monthly Result"," Table"]}),(0,w.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,mb:2},children:[(0,w.jsx)(l.A,{variant:"outlined",size:"small",value:O,onChange:e=>{P(e.target.value)},placeholder:"Search by AccountID",InputProps:{endAdornment:(0,w.jsx)(d.A,{position:"end",children:(0,w.jsx)(i.A,{edge:"end",color:"primary",onClick:()=>{E(O)},children:(0,w.jsx)(m.A,{})})})},sx:{width:"40%"}}),(0,w.jsxs)(h.A,{component:"label",color:"primary",variant:"contained",startIcon:(0,w.jsx)(S.A,{}),children:["Upload files",(0,w.jsx)(C,{type:"file",accept:".xlsx",onChange:e=>F(e),multiple:!1})]})]}),(0,w.jsx)(p.A,{children:(0,w.jsxs)(u.A,{children:[(0,w.jsx)(y.A,{children:(0,w.jsx)(A.A,{children:j.map(((e,t)=>(0,w.jsx)(g.A,{style:{textAlign:"center"},children:(0,w.jsx)(x.A,{active:U===e,direction:U===e?Z:"asc",onClick:()=>{return k(U===(t=e)&&"asc"===Z?"desc":"asc"),void B(t);var t},children:e})},t)))})}),(0,w.jsx)(f.A,{children:W.map(((e,t)=>(0,w.jsx)(A.A,{children:e.map(((e,t)=>(0,w.jsx)(g.A,{style:{padding:"20px",textAlign:"center"},children:e},t)))},t)))})]})}),(0,w.jsx)(v.A,{rowsPerPageOptions:[7,15,20],component:"div",count:N.length,rowsPerPage:D,page:M,onPageChange:(e,t)=>{_(t)},onRowsPerPageChange:e=>{z(parseInt(e.target.value,10)),_(0)}})]})})}},10466:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var r=a(29490),n=a(65043),s=a(19252),c=a(94496),o=a(74161),l=a(57488),d=(a(92342),a(43374)),i=a(923),h=a(39098),p=a(75139),u=a(40019),y=a(70579);const A=["AccountID","Description","Roll UP","IS/BS"];function g(){const e=(0,h.Mp)(),{user:t}=(0,p.Z)(),[a,r]=(0,n.useState)([]),[g,x]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{const e=1===t.role?{userId:t._id}:{userId:t.parent},a=await(0,i.An)(e);if("success"===a.type){l.oR.success("COA Successfully Upload!",{theme:"colored"});const e=a.data.map((e=>(e.pop(),e)));r(e)}else l.oR.error("COA Upload Error",{theme:"colored"})})()}),[t._id,t.parent,t.role]),(0,y.jsxs)(s.A,{maxWidth:!e.themeStretch&&"xl",children:[(0,y.jsx)(c.A,{variant:"h4",sx:{mb:2},children:" Upload Chart of Account "}),(0,y.jsx)(u.A,{onSetResult:e=>{r(e)},currentResult:a,titleArray:A}),(0,y.jsx)(o.A,{component:"label",color:"primary",variant:"contained",onClick:async()=>{x(!0);const e=JSON.parse(JSON.stringify(a));e.map((e=>(e.push(""),!0))),console.log(t.parent,t.role);const n=1===t.role?{userId:t._id,data:e}:{userId:t.parent,data:e};if(n.data&&0!==n.data.length){const e=await(0,i.Qw)(n);"success"===e.type?l.oR.success("COA Successfully Uploaded",{theme:"colored"}):l.oR.error("COA Upload Error",{theme:"colored"});const t=e.data.map((e=>(e.pop(),e)));r(t),x(!1)}else l.oR.error("COA data required!",{theme:"colored"}),x(!1)},loading:g,sx:{mt:2,mb:2},startIcon:(0,y.jsx)(d.A,{}),children:"Submit"})]})}function x(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.mg,{children:(0,y.jsx)("title",{children:" Dashboard: COA Upload"})}),(0,y.jsx)(g,{})]})}},51975:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(66734),n=a(70579);const s=(0,r.A)((0,n.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload")},92342:()=>{}}]);
//# sourceMappingURL=466.90ae54c0.chunk.js.map