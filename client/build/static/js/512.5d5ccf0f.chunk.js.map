{"version":3,"file":"static/js/512.5d5ccf0f.chunk.js","mappings":"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","sources":["api/forecast.js","api/transaction.js","utils/exportToExcel.js","components/forecastTable/header.js","components/forecastTable/container.js","components/forecastTable/index.js","components/balancesheet/header.js","components/balancesheet/container.js","components/balancesheet/func.js","components/balancesheet/index.js","sections/Bugeting_Forecasting/forecast/switch.js","sections/Bugeting_Forecasting/forecast/func.js","sections/Bugeting_Forecasting/forecast/view.js","pages/budgeting_forecasting/dataForecast.js"],"sourcesContent":["import axios, { endpoints } from 'src/utils/axios';\r\n\r\nexport const CreateForecast = async (forecast, coaResult) => {\r\n  const tempData = []\r\n  forecast.data.map(item => {\r\n      const tempItem = [...item]\r\n      tempItem[1] = tempItem[3]\r\n      tempItem[3] = tempItem[2]\r\n      tempItem[4] = 0\r\n      let flag = false;\r\n      coaResult.map(coa => {\r\n          if(coa[0].toString() === tempItem[0]) {\r\n            tempItem[2] = coa[2]; \r\n            flag = true;\r\n          }\r\n          return true;\r\n      })\r\n      if(flag === true) tempData.push(tempItem)\r\n      return true;\r\n  })\r\n  forecast.data = tempData;\r\n  try {\r\n    let result = ''\r\n    await axios.post(endpoints.forecast.create, forecast)\r\n            .then(res => {result = 'success'})\r\n            .catch(err => {result = 'error'})\r\n    return result;\r\n  } catch (error) {\r\n    console.log(\"Error Create Forecast\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport const UpdateForecast = async (forecast) => {\r\n  const tempData = []\r\n  const tempResult = JSON.parse(JSON.stringify(forecast))\r\n  forecast.data.forEach(element => {\r\n    tempData.push([element.AccountId,element.RevenueExpenseId,element.Description,0,element.result])\r\n  });\r\n  tempResult.data = tempData;\r\n  try {\r\n    let result = ''\r\n    await axios.post(endpoints.forecast.update, tempResult)\r\n            .then(res => {result = 'success'})\r\n            .catch(err => {result = 'error'})\r\n    return result\r\n  } catch (error) {\r\n    console.error(\r\n      'Error fetching Revenue By Month:', error\r\n    );\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const GetForecast = async (data) => {\r\n  try {\r\n    let result = {type:'', data:{}}\r\n    await axios.post(endpoints.forecast.get, data)\r\n            .then(res => {result = {type:'success', data:res.data}})\r\n            .catch(err => {result = {type: 'error', data:err}})\r\n    return result;\r\n  } catch (error) {\r\n    console.error(\r\n      'Error fetching Revenue By Month:', error\r\n    );\r\n    throw error;\r\n  }\r\n};","import axios, { endpoints } from 'src/utils/axios';\r\n\r\nexport const GetRevenueByMonth = async (data) => {\r\n  try {\r\n    let result = {type: '', data: {}}\r\n    await axios.post(endpoints.revenue.getRevenueByMonth, data)\r\n            .then(res => {result = {type: 'success', data: res.data}})\r\n            .catch(err => {result = {type: 'error', data: err}})\r\n    return result;\r\n  } catch (error) {\r\n    console.error(\r\n      'Error fetching Revenue By Month:', error\r\n    );\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const GetRevenue = async (data) => {\r\n  try {\r\n    let result = {type: '', data: {}}\r\n    await axios.post(endpoints.revenue.getRevenue, data)\r\n            .then(res => {result = {type: 'success', data: res.data.data.data}})\r\n            .catch(err => {result = {type: 'error', data: err}})\r\n    return result;\r\n  } catch (error) {\r\n    console.error(\r\n      'Error fetching Revenue:',error\r\n    );\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const GetBalanceSheet = async (data) => {\r\n  try {\r\n    let result = {type: '', data: {}}\r\n    await axios.post(endpoints.balanceSheet.getBalanceSheet, data)\r\n            .then(res => {result = {type: 'success', data: res.data.data.data}})\r\n            .catch(err => {result = {type: 'error', data: err}})\r\n    return result;\r\n  } catch (error) {\r\n    console.error(\r\n      'Error fetching Revenue:',error\r\n    );\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const GetBalanceSheetByMonth = async (data) => {\r\n  try {\r\n    let result = {type: '', data: {}}\r\n    await axios.post(endpoints.balanceSheet.getBalanceSheetByMonth, data)\r\n            .then(res => {result = {type: 'success', data: res.data}})\r\n            .catch(err => {result = {type: 'error', data: err}})\r\n    return result;\r\n  } catch (error) {\r\n    console.error(\r\n      'Error fetching Balance Sheet By Month:', error\r\n    );\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const GetCOA = async (data) => {\r\n  try {\r\n    let result = {type: '', data: {}}\r\n    await axios.post(endpoints.coa.getCOA, data)\r\n            .then(res => {result = {type: 'success', data: res.data.data.data}})\r\n            .catch(err => {result = {type: 'error', data: err}})\r\n    return result\r\n  } catch (error) {\r\n    console.error(\r\n      'Error fetching Revenue:',error\r\n    );\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const CreateRevenue = async (data) => {\r\n  try {\r\n    let result = {type: '', data: {}}\r\n    await axios.post(endpoints.revenue.create, data)\r\n            .then(res => {result = {type: 'success', data: res.data.data.data}})\r\n            .catch(err => {result = {type: 'error', data: err}})\r\n    return result;\r\n  } catch (error) {\r\n    console.log(\"Error Create Revenue\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport const CreateBalanceSheet = async (data) => {\r\n  try {\r\n    let result = {type: '', data: {}}\r\n    await axios.post(endpoints.balanceSheet.create, data)\r\n            .then(res => {result = {type: 'success', data: res.data.data.data}})\r\n            .catch(err => {result = {type: 'error', data: err}})\r\n    return result;\r\n  } catch (error) {\r\n    console.log(\"Error Create Revenue\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport const CreateCOA = async (data) => {\r\n  try {\r\n    let result = {type: '', data: {}}\r\n    await axios.post(endpoints.coa.create, data)\r\n            .then(res => {result = {type: 'success', data: res.data.data.data}})\r\n            .catch(err => {result = {type: 'error', data: err}})\r\n    return result;\r\n  } catch (error) {\r\n    console.log(\"Error Create COA\", error);\r\n    return [];\r\n  }\r\n}","\r\nimport * as XLSX from 'xlsx';\r\n// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport { saveAs } from 'file-saver';\r\n\r\nexport const exportToExcel = ({ data, month, fileName, type }) => {\r\n    let headers = [];\r\n    let excelData = [];\r\n    const headerRender = ['AccountID', 'RevenueExpenseID', 'Description'];\r\n    \r\n    if(type === 'forecast') {\r\n        headers = [...headerRender, ...month.flatMap(m => [`${m} Actual`, `${m} Forecast`]), 'Adjustment', 'Forecast'];\r\n\r\n        excelData = data.map(item => [\r\n        item.AccountId,\r\n        item.RevenueExpenseId,\r\n        item.Description,\r\n        ...item.data.flatMap(d => [d.actual, d.forecast]),  // Monthly data\r\n        item.userInfo,  // Adjustment column\r\n        item.result     // Forecast column\r\n        ]);\r\n    }\r\n\r\n    if(type === 'balancesheet') {\r\n        headers = ['AccountID', ...month];\r\n        \r\n        excelData = data.map(item => [\r\n            item.AccountId, // First column: Account ID\r\n            ...item.data.map(d => d.amount) // Monthly \"amount\" values\r\n        ]);\r\n    }\r\n    \r\n    // Create worksheet and workbook\r\n    const ws = XLSX.utils.aoa_to_sheet([headers, ...excelData]);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, 'Sheet1');\r\n\r\n    // Save file\r\n    const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n    const dataBlob = new Blob([excelBuffer], { type: 'application/octet-stream' });\r\n    saveAs(dataBlob, `${fileName}.xlsx`);\r\n};","import React from 'react'\r\n\r\nimport {\r\n    Box,\r\n    TextField,\r\n    InputAdornment,\r\n    IconButton,\r\n    Button,\r\n} from '@mui/material';\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ForecastHeader = \r\n    ({\r\n      inputRef, date,setDate, selectedDate, setExportData,\r\n      handleDateChange, addEditableRow,handleSearch,\r\n    }) => \r\n    (\r\n        <Box\r\n            sx={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            mt: 2,\r\n            mb: 2\r\n            }}\r\n        >\r\n            <TextField\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                inputRef={inputRef}\r\n                placeholder=\"Search by AccountID\"\r\n                InputProps={{\r\n                    endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                        <IconButton\r\n                        edge=\"end\"\r\n                        color=\"primary\"\r\n                        onClick={handleSearch} \r\n                        >\r\n                        <SearchIcon />\r\n                        </IconButton>\r\n                    </InputAdornment>\r\n                    ),\r\n                }}\r\n                sx={{ width: '20%' }}\r\n            />\r\n            <Box\r\n                sx={{\r\n                    display: 'flex',\r\n                    justifyContent: 'flex-end',\r\n                    mr: 4,\r\n                    ml: 4,\r\n                    border: '2px solid',\r\n                    borderColor: '#007867',\r\n                    borderRadius: 1,\r\n                    p: 0.2,\r\n                }}\r\n            >\r\n                <DatePicker \r\n                    label={date === null ? 'Forecast' : ''}\r\n                    views={['month', 'year']}  \r\n                    value={date} \r\n                    onChange={(e) => setDate(e)}\r\n                />\r\n            </Box>\r\n            <Box\r\n                sx={{\r\n                    display: 'flex',\r\n                    justifyContent: 'flex-end',\r\n                    alignItems: 'center',\r\n                    mr: 4,\r\n                    border: '2px solid',\r\n                    borderColor: '#007867',\r\n                    borderRadius: 1,\r\n                    p: 0.2,\r\n                }}\r\n            >\r\n                <DatePicker \r\n                    label={selectedDate.from === null ? 'From' : ''} \r\n                    views={['month', 'year']} \r\n                    value={selectedDate.from}\r\n                    onChange={(e) => handleDateChange(e, true)}\r\n                />\r\n                <Box sx={{ mx: 1 }}>-</Box>\r\n                <DatePicker \r\n                    label={selectedDate.to === null ? 'To' : ''}  \r\n                    views={['month', 'year']} \r\n                    value={selectedDate.to}\r\n                    onChange={(e) => handleDateChange(e, false)}\r\n                />\r\n            </Box>\r\n            <Button\r\n                variant='contained' color='primary' sx={{mr: 3}}\r\n                onClick={() => setExportData(true)}\r\n            >\r\n                Export\r\n            </Button>\r\n            <Button\r\n                variant='contained' color='primary' sx={{mr: 3}}\r\n                onClick={addEditableRow}\r\n            >\r\n                Add\r\n            </Button>\r\n        </Box>\r\n    )\r\n\r\nForecastHeader.propTypes = {\r\n  setExportData: PropTypes.func,\r\n  inputRef: PropTypes.object,\r\n  date: PropTypes.object,\r\n  selectedDate: PropTypes.object,\r\n  setDate: PropTypes.func,\r\n  addEditableRow: PropTypes.func,\r\n  handleDateChange: PropTypes.func,\r\n  handleSearch: PropTypes.func\r\n};\r\n\r\nexport default ForecastHeader","import React from 'react'\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableHead,\r\n    TableRow,\r\n    TextField,\r\n    TableSortLabel,\r\n    Button,\r\n} from '@mui/material';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ForecastContainer = \r\n    ({\r\n        header=[], month=[], paginatedData=[], newRow,\r\n        handleRequestSort, orderDirection, changeUserInfo,\r\n        handleInputChange, saveNewRow, cancelNewRow, orderBy\r\n    }) => (\r\n        <TableContainer>\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        {header.map((title, index) => (\r\n                            <TableCell rowSpan={2} key={index} style={{ textAlign: 'center'}}>\r\n                            <TableSortLabel\r\n                                active={orderBy === title}\r\n                                direction={orderBy === title ? orderDirection : 'asc'}\r\n                                onClick={() => handleRequestSort(title)}\r\n                            >\r\n                                {title}\r\n                            </TableSortLabel>\r\n                            </TableCell>\r\n                        ))}\r\n                        {month.map((item, key) => (\r\n                            <TableCell colSpan={2} key={key}  sx={{textAlign: 'center'}}>\r\n                            {item}\r\n                            </TableCell>\r\n                        ))}\r\n                        <TableCell rowSpan={2}>Adjustment</TableCell>\r\n                        <TableCell rowSpan={2}>Forecast</TableCell>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        {month.map((_, index) => (\r\n                            <React.Fragment key={index}>\r\n                            <TableCell sx={{textAlign: 'center'}}>Actual</TableCell>\r\n                            <TableCell sx={{textAlign: 'center'}}>Forecast</TableCell>\r\n                            </React.Fragment>\r\n                        ))}\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {paginatedData.map((item, index) => (\r\n                        <TableRow key={index} sx={{textAlign: 'center'}}>\r\n                            <TableCell sx={{textAlign: 'center'}}>{item.AccountId}</TableCell>\r\n                            <TableCell sx={{textAlign: 'center'}}>{item.RevenueExpenseId}</TableCell>\r\n                            <TableCell sx={{textAlign: 'center'}}>{item.Description}</TableCell>\r\n                            {item.data.map( (data, key) => (\r\n                                <React.Fragment key={key}>\r\n                                    <TableCell sx={{textAlign: 'center'}}>{data.actual}</TableCell>\r\n                                    <TableCell sx={{textAlign: 'center'}}>{data.forecast}</TableCell>\r\n                                </React.Fragment>\r\n                            ))}\r\n                            <TableCell>\r\n                                <TextField \r\n                                    type='number'\r\n                                    value= {item.userInfo} \r\n                                    size='small' sx={{maxWidth:65}}  \r\n                                    onChange={(e) => changeUserInfo(e.target.value, item.RevenueExpenseId)}\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell>{item.result}</TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                    {newRow && (\r\n                        <TableRow sx={{textAlign: 'center'}}>\r\n                            <TableCell sx={{textAlign: 'center'}}>\r\n                            <TextField\r\n                                value={newRow.AccountId}\r\n                                onChange={(e) => handleInputChange('AccountId', e.target.value)}\r\n                                size=\"small\"\r\n                            />\r\n                            </TableCell>\r\n                            <TableCell sx={{textAlign: 'center'}}>\r\n                            <TextField\r\n                                value={newRow.RevenueExpenseId}\r\n                                onChange={(e) => handleInputChange('RevenueExpenseId', e.target.value)}\r\n                                size=\"small\"\r\n                            />\r\n                            </TableCell>\r\n                            <TableCell sx={{textAlign: 'center'}}>\r\n                            <TextField\r\n                                value={newRow.Description}\r\n                                onChange={(e) => handleInputChange('Description', e.target.value)}\r\n                                size=\"small\"\r\n                            />\r\n                            </TableCell>\r\n                            {newRow.data.map((data, index) => (\r\n                            <React.Fragment key={index}>\r\n                                <TableCell sx={{textAlign: 'center'}}>\r\n                                0\r\n                                </TableCell>\r\n                                <TableCell sx={{textAlign: 'center'}}>\r\n                                0\r\n                                </TableCell>\r\n                            </React.Fragment>\r\n                            ))}\r\n                            <TableCell sx={{textAlign: 'center'}}>\r\n                            <TextField\r\n                                type='number'\r\n                                value={newRow.userInfo}\r\n                                sx={{maxWidth:65}}\r\n                                onChange={(e) => handleInputChange('userInfo', e.target.value)}\r\n                                size=\"small\"\r\n                            />\r\n                            </TableCell>\r\n                            <TableCell sx={{textAlign: 'center'}}>\r\n                            <Button onClick={saveNewRow}>Save</Button>\r\n                            <Button onClick={cancelNewRow}>Cancel</Button>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    )}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n\r\nForecastContainer.propTypes = {\r\n    header: PropTypes.array,\r\n    month: PropTypes.array,\r\n    orderBy: PropTypes.string,\r\n    orderDirection: PropTypes.string,\r\n    handleRequestSort: PropTypes.func,\r\n    handleInputChange:PropTypes.func,\r\n    paginatedData: PropTypes.array,\r\n    newRow: PropTypes.object,\r\n    saveNewRow: PropTypes.func,\r\n    cancelNewRow: PropTypes.func,\r\n    changeUserInfo: PropTypes.func,\r\n};\r\n\r\nexport default ForecastContainer","import React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n    Box,\r\n    Card,\r\n    TablePagination\r\n} from '@mui/material';\r\nimport PropTypes from 'prop-types';\r\nimport { parseInt } from 'lodash';\r\n// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport { toast } from 'react-toastify';\r\nimport { exportToExcel } from 'src/utils/exportToExcel';\r\nimport ForecastHeader from './header';\r\nimport ForecastContainer from './container';\r\n\r\nconst ForecastTable = ({ currentResult, month, date, setDate, changeResult, handleDateChange, selectedDate}) => {\r\n  const [tableData, setTableData] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const inputRef = useRef(null);\r\n  const [orderBy, setOrderBy] = useState('');\r\n  const [orderDirection, setOrderDirection] = useState('asc');\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [newRow, setNewRow] = useState(null);\r\n  const [exportData, setExportData] = useState(false);\r\n  const header = ['AccountID', 'RevenueExpenseID', 'Description'];\r\n\r\n  const handleRequestSort = (column) => {\r\n    const isAsc = orderBy === column && orderDirection === 'asc';\r\n    setOrderDirection(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(column);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleSearch = () => {\r\n    setSearchQuery(inputRef.current.value);\r\n  }\r\n\r\n  const addEditableRow = () => {\r\n    setNewRow({\r\n      AccountId: '',\r\n      RevenueExpenseId: '',\r\n      Description: '',\r\n      data: month.map(() => ({ actual: 0, forecast: 0 })),\r\n      average:0,\r\n      userInfo: 0,\r\n      result: 0,\r\n    });\r\n  };\r\n  \r\n  const saveNewRow = () => {\r\n    let flag = true;\r\n    if(newRow.AccountID === '' && newRow.RevenueExpenseId === '' && newRow.Description === '' && newRow.userInfo === 0) {\r\n      flag = false;\r\n      toast.warn('Missing Value',{theme:'colored'})\r\n    }\r\n    if (newRow && flag) {\r\n      const tempData = [...tableData, newRow];\r\n      changeResult(tempData)\r\n      setNewRow(null); \r\n    }\r\n  };\r\n\r\n  const cancelNewRow = () => {\r\n    setNewRow(null);\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setNewRow((prev) => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const sortedData = [...tableData].sort((a, b) => {\r\n    if (!orderBy) return 0;\r\n\r\n    const keyMap = {\r\n      AccountID: 'AccountId',\r\n      RevenueExpenseID: 'RevenueExpenseId',\r\n      Description: 'Description',\r\n    };\r\n    const key = keyMap[orderBy];\r\n\r\n    if (!key) return 0; \r\n    const valueA = a[key] ?? ''; \r\n    const valueB = b[key] ?? '';\r\n\r\n    if (typeof valueA === 'string' && typeof valueB === 'string') {\r\n      return orderDirection === 'asc'\r\n        ? valueA.localeCompare(valueB)\r\n        : valueB.localeCompare(valueA);\r\n    }\r\n\r\n    const numA = parseFloat(valueA);\r\n    const numB = parseFloat(valueB);\r\n    if (Number.isNaN(numA) || Number.isNaN(numB)) return 0; \r\n    return orderDirection === 'asc' ? numA - numB : numB - numA;\r\n  });\r\n  const filteredData = sortedData.filter((row) => row.AccountId ?.includes(searchQuery));\r\n  \r\n  const paginatedData = filteredData.slice(\r\n    page * rowsPerPage,\r\n    page * rowsPerPage + rowsPerPage\r\n  );\r\n\r\n  useEffect(() => {\r\n    setTableData(currentResult)\r\n  },[currentResult])\r\n\r\n  useEffect(() => {\r\n    if(exportData) {\r\n      if(tableData.length === 0 || month.length === 0 || date === null) {\r\n        toast.warn('Export data is missing',{theme:'colored'})\r\n      } else {\r\n        exportToExcel({ data: tableData, month, fileName: `forecast ${date}`, type:'forecast' });\r\n      }\r\n      setExportData(false);\r\n    }\r\n  },[exportData, tableData, date, month])\r\n\r\n  const changeUserInfo = (value, id) => {\r\n    const tempData = tableData.map(item => {\r\n      let realValue = 0\r\n      realValue = parseInt(value);\r\n      if(value === '' || value === undefined ) {\r\n        realValue = 0;\r\n      }\r\n      if(item.average === '' || item.average === undefined) {item.average = 0;}\r\n      const tempResult = parseInt(item.average + realValue);\r\n      if(item.RevenueExpenseId === id) {\r\n        return { ...item, userInfo: value , result: tempResult}\r\n      };\r\n      return item;\r\n    })\r\n    changeResult(tempData)\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        position: 'relative',\r\n        width: '100%',\r\n        justifyContent: 'top',\r\n        alignItems: 'center',\r\n      }}\r\n    >\r\n      <Card sx={{ \r\n        width: '100%', \r\n        p: 2,\r\n      }}>\r\n        <ForecastHeader \r\n          inputRef={inputRef} date={date} setDate={setDate} \r\n          handleSearch={handleSearch} addEditableRow={addEditableRow}\r\n          selectedDate={selectedDate} handleDateChange={handleDateChange}\r\n          setExportData={setExportData} \r\n        />\r\n        <ForecastContainer\r\n          header={header} month={month} paginatedData={paginatedData} newRow={newRow}\r\n          handleRequestSort={handleRequestSort} orderDirection={orderDirection} changeUserInfo={changeUserInfo}\r\n          handleInputChange={handleInputChange} saveNewRow={saveNewRow} cancelNewRow={cancelNewRow} orderBy={orderBy}\r\n        />\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={filteredData.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n          onRowsPerPageChange={handleChangeRowsPerPage}\r\n        />\r\n      </Card>\r\n    </Box>\r\n  );\r\n};\r\n\r\nForecastTable.propTypes = {\r\n  currentResult: PropTypes.array,\r\n  month: PropTypes.array,\r\n  date: PropTypes.object,\r\n  selectedDate: PropTypes.object,\r\n  setDate: PropTypes.func,\r\n  changeResult: PropTypes.func,\r\n  handleDateChange: PropTypes.func\r\n};\r\n\r\nexport default ForecastTable;\r\n","import React from 'react'\r\n\r\nimport {\r\n  Box,\r\n  TextField,\r\n  InputAdornment,\r\n  IconButton,\r\n} from '@mui/material';\r\nimport Button from '@mui/material/Button';\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst BalanceSheetHeader = ({\r\n  inputRef, selectedDate, handleDateChange,handleSearch,setExportData\r\n}) => (\r\n  <Box\r\n    sx={{\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    mt: 2,\r\n    mb: 2\r\n    }}\r\n  >\r\n    <TextField\r\n      variant=\"outlined\"\r\n      size=\"small\"\r\n      inputRef={inputRef}\r\n      placeholder=\"Search by AccountID\"\r\n      InputProps={{\r\n        endAdornment: (\r\n        <InputAdornment position=\"end\">\r\n          <IconButton\r\n            edge=\"end\"\r\n            color=\"primary\"\r\n            onClick={handleSearch} \r\n          >\r\n          <SearchIcon />\r\n          </IconButton>\r\n        </InputAdornment>\r\n        ),\r\n      }}\r\n      sx={{ width: '20%' }}\r\n    />\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n        alignItems: 'center',\r\n        mr: 4,\r\n        border: '2px solid',\r\n        borderColor: '#007867',\r\n        borderRadius: 1,\r\n        p: 0.2,\r\n      }}\r\n    >\r\n      <DatePicker \r\n        label={selectedDate.from === null ? 'From' : ''} \r\n        views={['month', 'year']} \r\n        value={selectedDate.from}\r\n        onChange={(e) => handleDateChange(e, true)}\r\n      />\r\n      <Box sx={{ mx: 1 }}>-</Box>\r\n      <DatePicker \r\n        label={selectedDate.to === null ? 'To' : ''}  \r\n        views={['month', 'year']} \r\n        value={selectedDate.to}\r\n        onChange={(e) => handleDateChange(e, false)}\r\n      />\r\n    </Box>\r\n      <Button\r\n        variant='contained' color='primary' sx={{mr: 3}}\r\n        onClick={() => setExportData(true)}\r\n      >\r\n        Export\r\n      </Button>\r\n  </Box>\r\n)\r\n\r\nBalanceSheetHeader.propTypes = {\r\n  inputRef:PropTypes.object,\r\n  selectedDate: PropTypes.object,\r\n  handleDateChange: PropTypes.func,\r\n  handleSearch: PropTypes.func,\r\n  setExportData: PropTypes.func\r\n};\r\n\r\nexport default BalanceSheetHeader","import React from 'react'\r\n\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TableSortLabel,\r\n} from '@mui/material';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nconst BalanceSheetContainer = ({ \r\n  month=[], paginatedData=[], orderBy, \r\n  handleRequestSort, orderDirection\r\n}) => (\r\n  <TableContainer>\r\n    <Table>\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell style={{ textAlign: 'center'}}>\r\n            <TableSortLabel\r\n              active={orderBy === 'AccountID'}\r\n              direction={orderBy === 'AccountID' ? orderDirection : 'asc'}\r\n              onClick={() => handleRequestSort('AccountID')}\r\n            >\r\n              AccountID\r\n            </TableSortLabel>\r\n          </TableCell>\r\n          {month.length > 0 && month.map((item, key) => (\r\n            <TableCell key={key}  sx={{textAlign: 'center'}}>\r\n              {item}\r\n            </TableCell>\r\n          ))}\r\n          <TableCell sx={{textAlign: 'center'}}>LifeTime Balance</TableCell>\r\n        </TableRow>\r\n      </TableHead>\r\n      <TableBody>\r\n        {paginatedData.length > 0 && paginatedData.map((item, index) => (\r\n          <TableRow key={index} sx={{textAlign: 'center'}}>\r\n            <TableCell sx={{textAlign: 'center'}}>{item.AccountId}</TableCell>\r\n            {item.data.length > 0 && item.data.map( (data, key) => (\r\n              <TableCell key={key} sx={{textAlign: 'center'}}>{data.amount}</TableCell>\r\n            ))}\r\n            <TableCell sx={{textAlign: 'center'}}>{item.lifetime_balance}</TableCell>\r\n          </TableRow>\r\n        ))}\r\n      </TableBody>\r\n    </Table>\r\n  </TableContainer>\r\n)\r\n\r\nBalanceSheetContainer.propTypes = {\r\n    month: PropTypes.array,\r\n    orderBy: PropTypes.string,\r\n    orderDirection: PropTypes.string,\r\n    handleRequestSort: PropTypes.func,\r\n    paginatedData: PropTypes.array,\r\n};\r\n\r\nexport default BalanceSheetContainer","export const fillMissingDates = (data, dateRange) => {\r\n    const tempData = JSON.parse(JSON.stringify(data));\r\n    for (let i = 0; i < tempData.length; i+=1) { \r\n      const subArray = tempData[i].data;\r\n      const filledSubArray = [];\r\n      // fill missing dates\r\n      for(let j = dateRange.from; j<= dateRange.to; j+=1){\r\n        if(j%100 === 12) {j = j - 12 + 100} \r\n        const existingObj = subArray.find(item => item.date === j); \r\n        if (existingObj) {\r\n          filledSubArray.push(existingObj);\r\n        } else {\r\n          filledSubArray.push({ amount: 0, date: j });\r\n        }\r\n      }\r\n      tempData[i].data = filledSubArray;\r\n    }\r\n    return tempData;\r\n  }\r\n  \r\nexport const formatData = (datasets, dateRange) => {\r\n    const tableData = new Map();\r\n    datasets.forEach(dataset => {\r\n      dataset.data.forEach(([AccountId, RevenueExpenseId, Amount, Description]) => {\r\n        const compositeKey = `${AccountId}`;\r\n        if (!tableData.has(compositeKey)) {\r\n          tableData.set(compositeKey, {\r\n            AccountId,\r\n            data: []\r\n          });\r\n        }\r\n        tableData.get(compositeKey).data.push({\r\n          date: dataset.date,\r\n          amount: Amount,\r\n        })\r\n      });\r\n    }); \r\n    const tableDataArray = Array.from(tableData.values())\r\n    const result = fillMissingDates(tableDataArray, dateRange);\r\n    return result\r\n}\r\n  \r\nexport const handleData = (data, dateRange) => {\r\n    const tempData = []\r\n    data.forEach(element => {\r\n      const tempItem = {date:'', data:[]}\r\n      tempItem.date = element.dateFlag\r\n      tempItem.data = [...element.data]\r\n      tempData.push(tempItem)\r\n    });\r\n    return formatData(tempData, dateRange);\r\n}\r\n \r\nexport const align = (total, period, dateRange) => {\r\n  const filledSubArray = [];\r\n  for(let j = dateRange.from; j<= dateRange.to; j+=1){\r\n    if(j%100 === 12) {j = j - 12 + 100} \r\n    filledSubArray.push({ amount: 0, date: j });\r\n  }\r\n\r\n  const tempData = JSON.parse(JSON.stringify(total));\r\n  for (let i = 0; i < tempData.length; i+=1) {\r\n    let subArray = []; \r\n    period.forEach(element => {\r\n      if(tempData[i].AccountId === element.AccountId) {\r\n        subArray = element.data\r\n      } \r\n    });\r\n    tempData[i].data = subArray;\r\n    if(subArray.length === 0) tempData[i].data = filledSubArray    \r\n  }\r\n  return tempData;\r\n}","import React, { useEffect, useRef, useState } from 'react'\r\nimport dayjs from 'dayjs';\r\nimport { Box, Card, TablePagination} from '@mui/material'\r\n// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport {toast } from 'react-toastify';\r\nimport { useAuthContext } from 'src/auth/hooks';\r\nimport { GetBalanceSheetByMonth } from 'src/api/transaction';\r\nimport { exportToExcel } from 'src/utils/exportToExcel';\r\nimport BalanceSheetHeader from './header'\r\nimport BalanceSheetContainer from './container'\r\nimport { handleData, align } from './func';\r\n\r\nconst monthArray = [\r\n  'January', 'Feburary', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\r\n]\r\n\r\nconst BalaceSheetAnalysis = () => {\r\n  const [tableData, setTableData] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const inputRef = useRef(null);\r\n  const [orderBy, setOrderBy] = useState('');\r\n  const [orderDirection, setOrderDirection] = useState('asc');\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [selectedDate, setSelectedDate] = useState({from:null, to:null});\r\n  const [exportData, setExportData] = useState(false);\r\n  const [months, setMonths] = useState([])\r\n  const {user} = useAuthContext()  \r\n  \r\n  const handleSearch = () => {\r\n    setSearchQuery(inputRef.current.value);\r\n  }\r\n\r\n  const handleDateChange = (date, type) => {\r\n    if (!date) return; \r\n    let dateResult;\r\n    if(type) {\r\n      dateResult = {...selectedDate, from: date}\r\n    } else {\r\n      dateResult = {...selectedDate, to: date}\r\n    }\r\n    setSelectedDate(dateResult)\r\n  };\r\n\r\n  const handleRequestSort = (column) => {\r\n    const isAsc = orderBy === column && orderDirection === 'asc';\r\n    setOrderDirection(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(column);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const sortedData = [...tableData].sort((a, b) => {\r\n    if (!orderBy) return 0;\r\n\r\n    const keyMap = {\r\n      AccountID: 'AccountId',\r\n      RevenueExpenseID: 'RevenueExpenseId',\r\n      Description: 'Description',\r\n    };\r\n    const key = keyMap[orderBy];\r\n\r\n    if (!key) return 0; \r\n    const valueA = a[key] ?? ''; \r\n    const valueB = b[key] ?? '';\r\n\r\n    if (typeof valueA === 'string' && typeof valueB === 'string') {\r\n      return orderDirection === 'asc'\r\n        ? valueA.localeCompare(valueB)\r\n        : valueB.localeCompare(valueA);\r\n    }\r\n\r\n    const numA = parseFloat(valueA);\r\n    const numB = parseFloat(valueB);\r\n    if (Number.isNaN(numA) || Number.isNaN(numB)) return 0; \r\n    return orderDirection === 'asc' ? numA - numB : numB - numA;\r\n  });\r\n\r\n  const filteredData = sortedData.filter((row) => row.AccountId ?.includes(searchQuery));\r\n  \r\n  const paginatedData = filteredData.slice(\r\n    page * rowsPerPage,\r\n    page * rowsPerPage + rowsPerPage\r\n  );\r\n\r\n  const headerSet = (dataset) => {\r\n    const headerTitle = []\r\n    dataset.forEach((data, index) => {\r\n      const year = parseInt(data.date/100, 10)\r\n      const month = data.date - year*100\r\n      const tempHeader = `${monthArray[month]} ${year}`\r\n      headerTitle.push(tempHeader);\r\n    });\r\n    setMonths(headerTitle)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchBalanceSheet = async () => {\r\n      try {\r\n        if (selectedDate.from !== null && selectedDate.to !== null) {\r\n          const startDate = dayjs(selectedDate.from).year()*100 + dayjs(selectedDate.from).month();\r\n          const endDate = dayjs(selectedDate.to).year()*100 + dayjs(selectedDate.to).month();\r\n          const dateRange = {from:startDate, to:endDate}\r\n          const data = user.role === 1 ? {\r\n            userId: user._id,\r\n            date: dateRange\r\n          } : {\r\n            userId: user.parent,\r\n            date: dateRange\r\n          }\r\n          const response = await GetBalanceSheetByMonth(data);\r\n          if(response.type === 'success') {\r\n            toast.success('Balance Sheet successfully loaded!', {theme:'colored'})\r\n          } else {\r\n            toast.error('Update Balance Sheet Error',{theme: \"colored\"})\r\n          }\r\n          const tempResult = handleData(response.data.data, dateRange);\r\n          const totalResult = align(response.data.total, tempResult, dateRange);\r\n          setTableData(totalResult)\r\n          headerSet(tempResult[0].data)\r\n        }\r\n      } catch (err) {\r\n        console.log(\"fetchBalanceSheet Error:\",err)\r\n      }\r\n    };\r\n    fetchBalanceSheet();\r\n  }, [selectedDate, user._id, user.parent, user.role]);\r\n\r\n  useEffect(() => {\r\n    if(exportData) {\r\n      if(tableData.length === 0 || months.length === 0) {\r\n        toast.warn('Export data is missing',{theme:'colored'})\r\n      } else {\r\n        exportToExcel({ data: tableData, month: months, fileName: `balancesheet ${selectedDate.from} - ${selectedDate.to}`, type:'balancesheet' });\r\n      }\r\n      setExportData(false);\r\n    }\r\n  },[exportData, tableData, selectedDate, months])\r\n\r\n  return (\r\n    <Box>\r\n      <Card \r\n        sx={{ width: '100%', p: 2,}}\r\n      >\r\n        <BalanceSheetHeader\r\n          handleSearch={handleSearch} inputRef={inputRef}\r\n          setExportData={setExportData} \r\n          selectedDate={selectedDate} handleDateChange={handleDateChange}\r\n        />\r\n        <BalanceSheetContainer\r\n          paginatedData={paginatedData} orderBy={orderBy} month={months}\r\n          handleRequestSort={handleRequestSort} orderDirection={orderDirection}\r\n        />\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={filteredData.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n          onRowsPerPageChange={handleChangeRowsPerPage}\r\n        />\r\n      </Card>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default BalaceSheetAnalysis","import PropTypes from 'prop-types';\r\n\r\nimport * as React from 'react';\r\nimport { styled } from '@mui/material/styles';\r\nimport Switch from '@mui/material/Switch';\r\nimport Stack from '@mui/material/Stack';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nconst AntSwitch = styled(Switch)(({ theme }) => ({\r\n    width: 70,\r\n    height: 30,\r\n    borderRadius: 15,\r\n    padding: 0,\r\n    display: 'flex',\r\n    '&:active': {\r\n      '& .MuiSwitch-thumb': {\r\n        width: 20,\r\n      },\r\n      '& .MuiSwitch-switchBase.Mui-checked': {\r\n        transform: 'translateX(40px)',\r\n      },\r\n    },\r\n    '& .MuiSwitch-switchBase': {\r\n      padding: 2,\r\n      '&.Mui-checked': {\r\n        transform: 'translateX(35px)',\r\n        color: '#fff',\r\n        '& + .MuiSwitch-track': {\r\n          opacity: 1,\r\n          ...theme.applyStyles('dark'),\r\n        },\r\n      },\r\n    },\r\n    '& .MuiSwitch-thumb': {\r\n      boxShadow: '0 2px 4px 0 rgb(0 35 11 / 20%)',\r\n      width: 24,\r\n      height: 24,\r\n      borderRadius: 20,\r\n      transition: theme.transitions.create(['width'], {\r\n        duration: 200,\r\n      }),\r\n    },\r\n    '& .MuiSwitch-track': {\r\n      borderRadius: 16 / 2,\r\n      opacity: 1,\r\n      backgroundColor: 'rgba(0,0,0,.25)',\r\n      boxSizing: 'border-box',\r\n      ...theme.applyStyles('dark', {\r\n        backgroundColor: 'rgba(255,255,255,.35)',\r\n      }),\r\n    },\r\n}));\r\n\r\nconst SwitchButton = ({setState, statement}) => {\r\n  const handlechange = () => {\r\n      setState(!statement);\r\n  }\r\n  return (\r\n      <Stack direction=\"row\" spacing={1} sx={{ alignItems: 'center' }}>\r\n        <Typography>BS</Typography>\r\n        <AntSwitch defaultChecked value={statement} onClick={handlechange}/>\r\n        <Typography>IS</Typography>\r\n      </Stack>\r\n  )\r\n}\r\n\r\nSwitchButton.propTypes = {\r\n  statement: PropTypes.bool,\r\n  setState: PropTypes.func\r\n};\r\nexport default SwitchButton;","export const fillMissingDates = (data, dateRange) => {\r\n    const tempData = JSON.parse(JSON.stringify(data));\r\n    for (let i = 0; i < tempData.length; i+=1) {\r\n      const subArray = tempData[i].data;\r\n      const filledSubArray = [];\r\n      let sum = 0;\r\n      for(let j = dateRange.from; j<= dateRange.to; j+=1){\r\n        if(j%100 === 12) {j = j - 12 + 100} \r\n        const existingObj = subArray.find(item => item.date === j);\r\n        if (existingObj) {\r\n          filledSubArray.push(existingObj);\r\n          sum += existingObj.actual;\r\n        } else {\r\n          filledSubArray.push({ actual: 0, date: j, forecast: 0 });\r\n        }\r\n      }\r\n      tempData[i].data = filledSubArray;\r\n      tempData[i].average = parseFloat((sum/filledSubArray.length).toPrecision(5));\r\n      tempData[i].userInfo = 0;\r\n      tempData[i].result = parseFloat((sum/filledSubArray.length).toPrecision(5));\r\n    }\r\n    return tempData;\r\n  }\r\n  \r\nexport const formatData = (datasets, dateRange) => {\r\n    const tableData = new Map();\r\n    datasets.forEach(dataset => {\r\n      dataset.data.forEach(([AccountId, RevenueExpenseId, Description, currentValue, forecastValue]) => {\r\n        const compositeKey = `${AccountId}_${RevenueExpenseId}`;\r\n        if (!tableData.has(compositeKey)) {\r\n          tableData.set(compositeKey, {\r\n            AccountId,\r\n            RevenueExpenseId,\r\n            Description,\r\n            data: []\r\n          });\r\n        }\r\n        tableData.get(compositeKey).data.push({\r\n          date: dataset.date,\r\n          actual: currentValue,\r\n          forecast: forecastValue\r\n        })\r\n      });\r\n    }); \r\n    const tableDataArray = Array.from(tableData.values())\r\n    const result = fillMissingDates(tableDataArray, dateRange);\r\n    return result\r\n}\r\n  \r\nexport const handleData = (data, dateRange) => {\r\n    const tempData = []\r\n    data.forEach(element => {\r\n      const tempItem = {date:'', data:[]}\r\n      tempItem.date = element.dateFlag\r\n      tempItem.data = [...element.data]\r\n      tempData.push(tempItem)\r\n    });\r\n    return formatData(tempData, dateRange);\r\n}\r\n  ","// @mui\r\nimport dayjs from 'dayjs';\r\nimport Box from '@mui/material/Box';\r\nimport Container from '@mui/material/Container';\r\nimport Typography from '@mui/material/Typography';\r\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\r\nimport {LoadingButton} from '@mui/lab';\r\n// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport { parseInt } from 'lodash';\r\n// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport {toast } from 'react-toastify';\r\nimport { useEffect, useState } from 'react';\r\nimport { useSettingsContext } from 'src/components/settings';\r\nimport { useAuthContext } from 'src/auth/hooks';\r\n// eslint-disable-next-line import/order\r\nimport { GetForecast, UpdateForecast } from 'src/api/forecast';\r\nimport ForecastTable from 'src/components/forecastTable';\r\nimport BalanceSheetAnalysis from 'src/components/balancesheet';\r\nimport SwitchButton from './switch';\r\nimport { handleData } from './func';\r\n\r\nconst monthArray = [\r\n  'January', 'Feburary', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\r\n]\r\n\r\nexport default function DataForecast() {\r\n  const settings = useSettingsContext();\r\n  const [selectedDate, setSelectedDate] = useState({from:null, to:null});\r\n  const [result, setResult] = useState([])\r\n  const [header, setHeader] = useState([])\r\n  const [uploadState, setUploadState] = useState(false);\r\n  const {user} = useAuthContext()  \r\n  const [currentDate, setCurrentDate] = useState(null);\r\n  const [statement, setStatement] = useState(true);\r\n\r\n  const headerSet = (dataset) => {\r\n    const headerTitle = []\r\n    dataset.forEach((data, index) => {\r\n      const year = parseInt(data.date/100)\r\n      const month = data.date - year*100\r\n      const tempHeader = `${monthArray[month]} ${year}`\r\n      headerTitle.push(tempHeader);\r\n    });\r\n    setHeader(headerTitle)\r\n  }\r\n\r\n  const handleDateChange = (date, type) => {\r\n    if (!date) return; \r\n    let dateResult;\r\n    if(type) {\r\n      dateResult = {...selectedDate, from: date}\r\n    } else {\r\n      dateResult = {...selectedDate, to: date}\r\n    }\r\n    setSelectedDate(dateResult)\r\n  };\r\n\r\n  const onSubmit = async () => {\r\n    setUploadState(true)\r\n    const saveDate = dayjs(currentDate).format('MMMM YYYY');\r\n    const dateflag = dayjs(currentDate).year()*100 + dayjs(currentDate).month();\r\n\r\n    const data = user.role === 1 ? {\r\n      userId: user._id,\r\n      date: saveDate,\r\n      dateFlag: dateflag,\r\n      data: result\r\n    } : {\r\n      userId: user.parent,\r\n      date: saveDate,\r\n      dateFlag: dateflag,\r\n      data: result\r\n    }\r\n\r\n    if(!data.data || data.data.length === 0) {\r\n      toast.error('Monthly Result data required!',{theme: \"colored\"})\r\n      setUploadState(false)\r\n    } else {\r\n      const response = await UpdateForecast(data);\r\n      if(response === 'success') {\r\n        toast.success('Forecast successfully Uploaded!', {theme:'colored'})\r\n      } else {\r\n        toast.error('Update Forecast Error',{theme: \"colored\"})\r\n      }\r\n      setUploadState(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchForecast = async () => {\r\n      try {\r\n        if (selectedDate.from !== null && selectedDate.to !== null) {\r\n          const startDate = dayjs(selectedDate.from).year()*100 + dayjs(selectedDate.from).month();\r\n          const endDate = dayjs(selectedDate.to).year()*100 + dayjs(selectedDate.to).month();\r\n          const dateRange = {from:startDate, to:endDate}\r\n          const data = user.role === 1 ? {\r\n            userId: user._id,\r\n            date: dateRange\r\n          } : {\r\n            userId: user.parent,\r\n            date: dateRange\r\n          }\r\n\r\n          const response = await GetForecast(data);\r\n          if(response.type === 'success') {\r\n            toast.success('History successfully loaded!', {theme:'colored'})\r\n          } else {\r\n            toast.error('Update Forecast Error',{theme: \"colored\"})\r\n          }\r\n          const tempResult = handleData(response.data, dateRange);\r\n          setResult(tempResult)\r\n          headerSet(tempResult[0].data)\r\n        }\r\n      } catch (err) {\r\n        console.log(\"fetchForecast Error:\",err)\r\n      }\r\n    };\r\n    fetchForecast();\r\n  }, [selectedDate, user._id, user.parent, user.role]);\r\n\r\n  return (\r\n    <Container maxWidth={settings.themeStretch ? false : 'xl'}>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', pb: 2 }}>\r\n        <Typography variant=\"h4\"> \r\n          {statement === true ? \"Forecast IncomeStatement\" : \"Analysis BalanceSheet\"} \r\n        </Typography>\r\n        <SwitchButton statement={statement} setState={(data) => setStatement(data)}/>\r\n      </Box>\r\n      <Box>\r\n        {statement === true ? \r\n          <ForecastTable \r\n            currentResult={result} month={header} \r\n            date={currentDate} selectedDate={selectedDate}\r\n            handleDateChange = {handleDateChange}\r\n            setDate = {(date) => setCurrentDate(date)}\r\n            changeResult = {(data) => setResult(data)}\r\n          />\r\n          :\r\n          <BalanceSheetAnalysis />\r\n        }\r\n      </Box>\r\n      <Box>\r\n        <LoadingButton\r\n          component=\"label\"\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          onClick={onSubmit}\r\n          loading={uploadState}\r\n          sx = {{mt:2, mb:2}}\r\n          startIcon={<CloudUploadIcon />}\r\n        >\r\n          Submit\r\n        </LoadingButton>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { Helmet } from 'react-helmet-async';\r\nimport DataForecast from 'src/sections/Bugeting_Forecasting/forecast/view';\r\n// sections\r\n\r\nexport default function Page() {\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title> Dashboard: Details</title>\r\n      </Helmet>\r\n\r\n      <DataForecast />\r\n    </>\r\n  );\r\n}\r\n"],"names":["CreateForecast","async","forecast","coaResult","tempData","data","map","item","tempItem","flag","coa","toString","push","result","axios","post","endpoints","create","then","res","catch","err","error","console","log","UpdateForecast","tempResult","JSON","parse","stringify","forEach","element","AccountId","RevenueExpenseId","Description","update","GetForecast","type","get","GetRevenueByMonth","revenue","getRevenueByMonth","GetRevenue","getRevenue","GetBalanceSheet","balanceSheet","getBalanceSheet","GetBalanceSheetByMonth","getBalanceSheetByMonth","GetCOA","getCOA","CreateRevenue","CreateBalanceSheet","CreateCOA","exportToExcel","_ref","month","fileName","headers","excelData","flatMap","m","concat","d","actual","userInfo","amount","ws","XLSX","aoa_to_sheet","wb","book_new","book_append_sheet","excelBuffer","bookType","dataBlob","Blob","saveAs","inputRef","date","setDate","selectedDate","setExportData","handleDateChange","addEditableRow","handleSearch","_jsxs","Box","sx","display","justifyContent","alignItems","mt","mb","children","_jsx","TextField","variant","size","placeholder","InputProps","endAdornment","InputAdornment","position","IconButton","edge","color","onClick","SearchIcon","width","mr","ml","border","borderColor","borderRadius","p","DatePicker","label","views","value","onChange","e","from","mx","to","Button","header","paginatedData","newRow","handleRequestSort","orderDirection","changeUserInfo","handleInputChange","saveNewRow","cancelNewRow","orderBy","TableContainer","Table","TableHead","TableRow","title","index","TableCell","rowSpan","style","textAlign","TableSortLabel","active","direction","key","colSpan","_","React","TableBody","maxWidth","target","currentResult","changeResult","tableData","setTableData","useState","searchQuery","setSearchQuery","useRef","setOrderBy","setOrderDirection","page","setPage","rowsPerPage","setRowsPerPage","setNewRow","exportData","filteredData","sort","a","b","_a$key","_b$key","AccountID","RevenueExpenseID","valueA","valueB","localeCompare","numA","parseFloat","numB","Number","isNaN","filter","row","_row$AccountId","includes","slice","useEffect","length","toast","warn","theme","flexDirection","Card","ForecastHeader","current","average","ForecastContainer","column","id","realValue","parseInt","undefined","_objectSpread","field","prev","TablePagination","rowsPerPageOptions","component","count","onPageChange","handleChangePage","event","newPage","onRowsPerPageChange","lifetime_balance","formatData","datasets","dateRange","Map","dataset","Amount","compositeKey","has","set","fillMissingDates","i","subArray","filledSubArray","j","existingObj","find","Array","values","monthArray","BalaceSheetAnalysis","setSelectedDate","months","setMonths","user","useAuthContext","startDate","dayjs","year","role","userId","_id","parent","response","success","handleData","dateFlag","totalResult","align","total","period","headerTitle","tempHeader","headerSet","fetchBalanceSheet","BalanceSheetHeader","dateResult","BalanceSheetContainer","AntSwitch","styled","Switch","height","padding","transform","opacity","applyStyles","boxShadow","transition","transitions","duration","backgroundColor","boxSizing","_ref2","setState","statement","Stack","spacing","Typography","defaultChecked","handlechange","currentValue","forecastValue","sum","toPrecision","DataForecast","settings","useSettingsContext","setResult","setHeader","uploadState","setUploadState","currentDate","setCurrentDate","setStatement","fetchForecast","Container","themeStretch","pb","SwitchButton","ForecastTable","BalanceSheetAnalysis","LoadingButton","saveDate","format","dateflag","loading","startIcon","CloudUploadIcon","Page","_Fragment","Helmet"],"sourceRoot":""}