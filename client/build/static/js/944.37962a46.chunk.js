"use strict";(self.webpackChunkfinance_dashboard=self.webpackChunkfinance_dashboard||[]).push([[944],{53517:(e,s,r)=>{r.d(s,{BD:()=>t,Ud:()=>o,xw:()=>n});var a=r(63204);const t=async e=>{try{let s="";if(await a.Ay.post(a.vZ.auth.forgotPassword,{email:e}).then((()=>{s="success"})).catch((e=>{var r,a;s=(null===e||void 0===e||null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to send reset email"})),"success"!==s)throw new Error(s);return{message:"Password reset link sent successfully"}}catch(s){throw console.error("Error in forgotPassword:",s),s}},o=async e=>{try{let s={type:"",data:{}};if(await a.Ay.get("".concat(a.vZ.auth.verifyToken,"/").concat(e)).then((e=>{s={type:"success",data:e.data}})).catch((e=>{var r,a;const t=(null===e||void 0===e||null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Invalid or expired token";s={type:"error",data:t}})),"error"===s.type)throw new Error(s.data);return s.data}catch(s){throw console.error("Error in verifyResetToken:",s),s}},n=async(e,s)=>{try{let r="";if(await a.Ay.post("".concat(a.vZ.auth.resetPassword),{password:s,token:e}).then((()=>{r="success"})).catch((e=>{var s,a;r=(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to reset password"})),"success"!==r)throw new Error(r);return{message:"Password has been reset successfully"}}catch(r){throw console.error("Error in resetPassword:",r),r}}},33944:(e,s,r)=>{r.r(s),r.d(s,{default:()=>b});var a=r(29490),t=r(80899),o=r(65043),n=r(24858),i=r(18403),d=r(74161),l=r(77718),c=r(88911),u=r(17392),h=r(94496),w=r(51787),p=r(7353),x=r(48407),y=r(67132),v=r(59229),m=r(2746),f=r(98357),g=r(53517),j=r(70579);function A(){const e=(0,y.rd)(),{token:s}=(0,y.g)(),[r,a]=(0,o.useState)(!1),[A,b]=(0,o.useState)(!0),[P,k]=(0,o.useState)(""),[S,C]=(0,o.useState)(""),[E,I]=(0,o.useState)(""),R=(0,v.C)();(0,o.useEffect)((()=>{s&&(async()=>{try{await(0,g.Ud)(s),a(!0),k("")}catch(e){a(!1),k("string"===typeof e?e:e.message||"Token is invalid or has expired")}finally{b(!1)}})()}),[s]);const T=t.Ik().shape({password:t.Yj().required("Password is required").min(6,"Password must be at least 6 characters"),confirmPassword:t.Yj().required("Confirm password is required").oneOf([t.KR("password")],"Passwords must match")}),q=(0,n.mN)({resolver:(0,i.t)(T),defaultValues:{password:"",confirmPassword:""}}),{reset:F,handleSubmit:N,formState:{isSubmitting:Y}}=q,Z=N((async r=>{try{await(0,g.xw)(s,r.password),F(),C("Password reset successfully!"),I(""),setTimeout((()=>{e.push(x.f.auth.jwt.login)}),3e3)}catch(a){console.error(a),I("string"===typeof a?a:a.message),C("")}}));return A?(0,j.jsx)(c.A,{spacing:3,sx:{mb:5,alignItems:"center"},children:(0,j.jsx)(h.A,{variant:"h4",children:"Verifying reset link..."})}):r?(0,j.jsx)(p.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,j.jsx)(p.A,{sx:{width:500},children:(0,j.jsxs)(f.A,{methods:q,onSubmit:Z,children:[(0,j.jsxs)(c.A,{spacing:3,sx:{mb:5},children:[(0,j.jsx)(h.A,{variant:"h4",children:"Reset Your Password"}),(0,j.jsx)(h.A,{variant:"body2",sx:{color:"text.secondary"},children:"Please create a new password for your account."})]}),!!S&&(0,j.jsx)(l.A,{severity:"success",children:S}),!!E&&(0,j.jsx)(l.A,{severity:"error",children:E}),(0,j.jsxs)(c.A,{spacing:3,children:[(0,j.jsx)(f.o,{name:"password",label:"New Password",type:R.value?"text":"password",InputProps:{endAdornment:(0,j.jsx)(w.A,{position:"end",children:(0,j.jsx)(u.A,{onClick:R.onToggle,edge:"end",children:(0,j.jsx)(m.A,{icon:R.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),(0,j.jsx)(f.o,{name:"confirmPassword",label:"Confirm New Password",type:R.value?"text":"password",InputProps:{endAdornment:(0,j.jsx)(w.A,{position:"end",children:(0,j.jsx)(u.A,{onClick:R.onToggle,edge:"end",children:(0,j.jsx)(m.A,{icon:R.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),(0,j.jsx)(d.A,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:Y,children:"Reset Password"})]})]})})}):(0,j.jsxs)(c.A,{spacing:3,sx:{mb:5},children:[(0,j.jsx)(h.A,{variant:"h4",children:"Link Invalid"}),(0,j.jsx)(l.A,{severity:"error",children:P||"Sorry, this password reset link is invalid or has expired."}),(0,j.jsx)(h.A,{variant:"body2",children:"Please request a new password reset link."})]})}function b(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(a.mg,{children:(0,j.jsx)("title",{children:" Reset Password | Revenue Dashboard"})}),(0,j.jsx)(A,{})]})}}}]);
//# sourceMappingURL=944.37962a46.chunk.js.map