"use strict";(self.webpackChunkfinance_dashboard=self.webpackChunkfinance_dashboard||[]).push([[770],{41770:(e,t,s)=>{s.r(t),s.d(t,{default:()=>W});var r=s(29490),a=s(89379),n=s(65043),o=s(31546),c=s(57488),i=s(19252),l=s(94496),d=s(7353),u=s(38679),h=s(39098),m=s(12110),x=s(67784),p=s(51787),A=s(17392),j=s(49633),v=s(79650),y=s(71806),g=s(84882),f=s(68738),w=s(39652),b=s(58093),S=s(73460),C=s(68039),R=s(51975),M=s(79484),I=s(70579);const U=e=>{let{currentUsers:t,titleArray:s,handleModal:r,deleteUsers:a}=e;const[o,c]=(0,n.useState)([]),[i,l]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[U,D]=(0,n.useState)(""),[P,k]=(0,n.useState)("asc"),[L,E]=(0,n.useState)(0),[F,q]=(0,n.useState)(7),z=[...o].sort(((e,t)=>{if(!U)return 0;const r=s.indexOf(U);return e[r]<t[r]?"asc"===P?-1:1:e[r]>t[r]?"asc"===P?1:-1:0})).filter((e=>{var t;return null===(t=e.email)||void 0===t?void 0:t.toString().includes(i)})),_=z.slice(L*F,L*F+F);return(0,n.useEffect)((()=>{c(t)}),[t]),(0,I.jsx)(d.A,{sx:{display:"flex",flexDirection:"column",position:"relative",width:"100%",justifyContent:"top",alignItems:"center"},children:(0,I.jsxs)(m.A,{sx:{width:"100%",p:2},children:[(0,I.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,mb:2},children:[(0,I.jsx)(x.A,{variant:"outlined",size:"small",value:u,onChange:e=>{h(e.target.value)},placeholder:"Search by Email",InputProps:{endAdornment:(0,I.jsx)(p.A,{position:"end",children:(0,I.jsx)(A.A,{edge:"end",color:"primary",onClick:()=>{l(u)},children:(0,I.jsx)(M.A,{})})})},sx:{width:"40%"}}),(0,I.jsx)(j.A,{component:"label",color:"primary",variant:"contained",onClick:()=>r(!0),startIcon:(0,I.jsx)(R.A,{}),children:"Add User"})]}),(0,I.jsx)(v.A,{children:(0,I.jsxs)(y.A,{children:[(0,I.jsx)(g.A,{children:(0,I.jsx)(f.A,{children:s.map(((e,t)=>(0,I.jsxs)(w.A,{style:{textAlign:"center"},children:[e,(0,I.jsx)(b.A,{active:U===e,direction:U===e?P:"asc",onClick:()=>{return k(U===(t=e)&&"asc"===P?"desc":"asc"),void D(t);var t}})]},t)))})}),(0,I.jsx)(S.A,{children:_.map(((e,t)=>(0,I.jsxs)(f.A,{children:[(0,I.jsx)(w.A,{style:{textAlign:"center"},children:t}),(0,I.jsx)(w.A,{style:{textAlign:"center"},children:e.email}),(0,I.jsx)(w.A,{style:{textAlign:"center"},children:e.role}),(0,I.jsx)(w.A,{style:{textAlign:"center"},children:"asd"}),(0,I.jsx)(w.A,{style:{textAlign:"center"},children:(0,I.jsx)(j.A,{variant:"contained",color:"error",startIcon:(0,I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 20 20",children:(0,I.jsx)("path",{fill:"currentColor",d:"M5 6a4 4 0 1 1 8 0a4 4 0 0 1-8 0m4-3a3 3 0 1 0 0 6a3 3 0 0 0 0-6M2 13c0-1.113.903-2 2.009-2h6.248a5.5 5.5 0 0 0-.657 1H4.009C3.448 12 3 12.447 3 13c0 1.309.622 2.284 1.673 2.953C5.743 16.636 7.265 17 9 17q.3 0 .592-.015q.261.513.618.958Q9.617 18 9 18c-1.855 0-3.583-.386-4.865-1.203C2.833 15.967 2 14.69 2 13m17 1.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-2.646-1.146a.5.5 0 0 0-.708-.708L14.5 13.793l-1.146-1.147a.5.5 0 0 0-.708.708l1.147 1.146l-1.147 1.146a.5.5 0 0 0 .708.708l1.146-1.147l1.146 1.147a.5.5 0 0 0 .708-.708L15.207 14.5z"})}),onClick:()=>a(e.email),children:"Delete User"})})]},t)))})]})}),(0,I.jsx)(C.A,{rowsPerPageOptions:[7,15,20],component:"div",count:z.length,rowsPerPage:F,page:L,onPageChange:(e,t)=>{E(t)},onRowsPerPageChange:e=>{q(parseInt(e.target.value,10)),E(0)}})]})})};var D=s(75139),P=s(33438),k=s(80899),L=s(24858),E=s(18403),F=s(74161),q=s(77718),z=s(88911),_=s(94814),Q=s(59229),N=s(2746),T=s(98357);const Z=e=>{let{handleModal:t,addUsers:s}=e;const[r,a]=(0,n.useState)(""),o=(0,Q.C)(),c=k.Ik().shape({role:k.ai().required("Role is required").oneOf([2,3],"Role must be between 2 and 3"),email:k.Yj().required("Email is required").email("Email must be a valid email address"),password:k.Yj().required("Password is required")}),i=(0,L.mN)({resolver:(0,E.t)(c),defaultValues:{role:2,email:"",password:""}}),{reset:l,handleSubmit:d,formState:{isSubmitting:u}}=i,h=d((async e=>{try{s({email:e.email,password:e.password,role:e.role}),t(!1),l()}catch(r){a(r),l()}})),m=(0,I.jsx)(T.A,{methods:i,onSubmit:h,children:(0,I.jsxs)(z.A,{spacing:2.5,children:[!!r&&(0,I.jsx)(q.A,{severity:"error",children:r}),(0,I.jsxs)(T.o,{name:"role",label:"Role",select:!0,children:[(0,I.jsx)(_.A,{value:2,children:"2"}),(0,I.jsx)(_.A,{value:3,children:"3"})]}),(0,I.jsx)(T.o,{name:"email",label:"Email address"}),(0,I.jsx)(T.o,{name:"password",label:"Password",type:o.value?"text":"password",InputProps:{endAdornment:(0,I.jsx)(p.A,{position:"end",children:(0,I.jsx)(A.A,{onClick:o.onToggle,edge:"end",children:(0,I.jsx)(N.A,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),(0,I.jsx)(F.A,{fullWidth:!0,color:"primary",variant:"contained",size:"medium",type:"submit",loading:u,children:"Add User"})]})});return(0,I.jsx)(I.Fragment,{children:m})},O=e=>{let{handleModal:t,addUsers:s}=e;return(0,I.jsxs)(d.A,{children:[(0,I.jsx)(A.A,{onClick:()=>t(!1),sx:{position:"absolute",top:8,right:8,color:"gray"},children:(0,I.jsx)(P.A,{})}),(0,I.jsx)("h2",{style:{textAlign:"center"},children:"Add User"}),(0,I.jsx)(Z,{handleModal:t,addUsers:s})]})};var Y=s(51496),X=s(63204);const B=["No","Email","Role","Company","Action"],H={price_1R0Xe902EF3FQcIQvGKOMZ9S:1,price_1R1clP02EF3FQcIQYmFj9rxn:1,price_1R0XeD02EF3FQcIQDMxYwv7D:5},V=()=>{const e=(0,h.Mp)(),[t,s]=(0,n.useState)([]),{user:r}=(0,D.Z)(),[m,x]=(0,n.useState)(!1),p=e=>{t.length>=H[r.subscription]?c.oR.warn("update your subscription, user count limited!",{theme:"colored"}):x(e)};return(0,n.useEffect)((()=>{(async()=>{const e=await(async e=>{const t={success:!1,data:[]};return await X.Ay.post(X.vZ.auth.get,{userId:e}).then((e=>{t.data=e.data.users,t.success=!0})).catch((e=>{t.success=!1,t.data=e.message})),t})(r._id);if(!0===e.success){c.oR.success("successfully uploaded!",{theme:"colored"});const t=(e=>{let t=[];return t=e.map((e=>({email:e.email,role:e.role}))),t})(e.data);s(t)}else c.oR.error("".concat(e.data),{theme:"colored"})})()}),[r._id]),(0,I.jsxs)(i.A,{maxWidth:!e.themeStretch&&"xl",children:[(0,I.jsx)(l.A,{variant:"h4",children:" UserManagement "}),(0,I.jsx)(d.A,{sx:{mt:5,width:1,borderRadius:2,bgcolor:e=>(0,o.X4)(e.palette.grey[500],.04),border:e=>"dashed 1px ".concat(e.palette.divider)},children:(0,I.jsx)(U,{onSetResult:e=>{s(e)},currentUsers:t,titleArray:B,handleModal:p,deleteUsers:async e=>{try{const r=await(async e=>{const t={success:!1};return await X.Ay.post(X.vZ.auth.delete,{email:e}).then((e=>{t.success=!0})).catch((e=>{t.success=!1})),t})(e);if(r.success){c.oR.success("successfully deleted!",{theme:"colored"});const r=t.filter((t=>t.email!==e));s(r)}}catch(r){c.oR.error("".concat(r.data),{theme:"colored"})}}})}),(0,I.jsx)(u.A,{open:m,onClose:()=>p(!1),children:(0,I.jsx)(d.A,{sx:(0,a.A)((0,a.A)({},Y.hB),{},{position:"relative"}),children:(0,I.jsx)(O,{handleModal:p,addUsers:async e=>{try{const a=await(async(e,t,s,r)=>{const a={success:!1,data:""};return await X.Ay.post(X.vZ.auth.register,{parent:e,email:t,password:s,role:r}).then((e=>{a.success=!0,a.data=e.data.data})).catch((e=>{a.success=!1,a.data=e})),a})(r._id,e.email,e.password,e.role);if(a.success){c.oR.success("Successfully Added!",{theme:"colored"});const r=[...t,{email:e.email,role:e.role}];s(r)}else c.oR.error("".concat(a.data),{theme:"colored"});p(!1)}catch(a){p(!1),console.log(a)}}})})})]})};function W(){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(r.mg,{children:(0,I.jsx)("title",{children:" UserManagement"})}),(0,I.jsx)(V,{})]})}},51975:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(66734),a=s(70579);const n=(0,r.A)((0,a.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload")},79484:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(66734),a=s(70579);const n=(0,r.A)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},58093:(e,t,s)=>{s.d(t,{A:()=>b});var r=s(89379),a=s(80045),n=s(98610),o=s(58387),c=s(65043),i=s(64551),l=s(66734),d=s(70579);const u=(0,l.A)((0,d.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");var h=s(34535),m=s(56262),x=s(98206),p=s(6803),A=s(92532),j=s(72372);function v(e){return(0,j.Ay)("MuiTableSortLabel",e)}const y=(0,A.A)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]),g=["active","children","className","direction","hideSortIcon","IconComponent"],f=(0,h.Ay)(i.A,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.active&&t.active]}})((0,m.A)((e=>{let{theme:t}=e;return{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,["& .".concat(y.icon)]:{opacity:.5}},["&.".concat(y.active)]:{color:(t.vars||t).palette.text.primary,["& .".concat(y.icon)]:{opacity:1,color:(t.vars||t).palette.text.secondary}}}}))),w=(0,h.Ay)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.icon,t["iconDirection".concat((0,p.A)(s.direction))]]}})((0,m.A)((e=>{let{theme:t}=e;return{fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}}))),b=c.forwardRef((function(e,t){const s=(0,x.b)({props:e,name:"MuiTableSortLabel"}),{active:c=!1,children:i,className:l,direction:h="asc",hideSortIcon:m=!1,IconComponent:A=u}=s,j=(0,a.A)(s,g),y=(0,r.A)((0,r.A)({},s),{},{active:c,direction:h,hideSortIcon:m,IconComponent:A}),b=(e=>{const{classes:t,direction:s,active:r}=e,a={root:["root",r&&"active","direction".concat((0,p.A)(s))],icon:["icon","iconDirection".concat((0,p.A)(s))]};return(0,n.A)(a,v,t)})(y);return(0,d.jsxs)(f,(0,r.A)((0,r.A)({className:(0,o.A)(b.root,l),component:"span",disableRipple:!0,ownerState:y,ref:t},j),{},{children:[i,m&&!c?null:(0,d.jsx)(w,{as:A,className:(0,o.A)(b.icon),ownerState:y})]}))}))}}]);
//# sourceMappingURL=770.df5d4568.chunk.js.map